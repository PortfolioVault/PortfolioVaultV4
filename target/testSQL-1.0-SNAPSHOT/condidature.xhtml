<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"

      xmlns:f="http://xmlns.jcp.org/jsf/core">
<f:view>
    <h:head>
        <link rel="stylesheet" />
    </h:head>
    <h:body>
        <f:metadata>
            <f:event type="preRenderView" listener="#{offreListPageBean.fetchData}" />
        </f:metadata>
        <h:form>
            <div class="section-container">
                <h:dataTable value="#{offreListPageBean.receivedMessages}" var="postulat" styleClass="application-table">
                    <h:column>
                        <f:facet name="header">Received Messages</f:facet>
                        <h:outputText value="Offre description : #{postulat[1]}" /><br/>
                        <h:outputText value="Condidature  : " /><br/>
                        <h4>Full Name : #{offreListPageBean.user.firstName} #{offreListPageBean.user.lastName}</h4>
                        <h3>Personal Infos</h3>
                        <ul>
                            <li>Professional Title: #{offreListPageBean.user.professionalTitle}</li>
                            <li>Age: #{offreListPageBean.user.age}</li>
                            <li>Email: #{offreListPageBean.user.email}</li>
                            <li>Address: #{offreListPageBean.user.address}</li>
                            <li>Phone Number: #{offreListPageBean.user.phoneNumber}</li>
                        </ul>
                        <h3>Educations</h3>
                        <c:if test="#{not empty offreListPageBean.user.educations}">
                            <h:dataTable value="#{offreListPageBean.user.educations}" var="education" styleClass="education-table">
                                <h:column>
                                    <f:facet name="header">Date d'Obtention</f:facet>
                                    #{education.yearOfObtention}
                                </h:column>
                                <h:column>
                                    <f:facet name="header">Diplôme</f:facet>
                                    #{education.diplomat}
                                </h:column>
                                <h:column>
                                    <f:facet name="header">Université</f:facet>
                                    #{education.university}
                                </h:column>
                            </h:dataTable>
                        </c:if>

                        <h3>Experiences</h3>
                        <c:if test="#{not empty offreListPageBean.user.experiences}">
                            <h:dataTable value="#{offreListPageBean.user.experiences}" var="experience" styleClass="experience-table">
                                <h:column>
                                    <f:facet name="header">Date de Début</f:facet>
                                    #{experience.startDate}
                                </h:column>
                                <h:column>
                                    <f:facet name="header">Date de Fin</f:facet>
                                    #{experience.endDate}
                                </h:column>
                                <h:column>
                                    <f:facet name="header">Rôle</f:facet>
                                    #{experience.role}
                                </h:column>
                                <h:column>
                                    <f:facet name="header">Entreprise</f:facet>
                                    #{experience.company}
                                </h:column>
                            </h:dataTable>
                        </c:if>
                        <h:commandButton value="Accepter" action="#{offreListPageBean.accepterCandidature}" />
                        <h:commandButton value="Rejeter" action="#{offreListPageBean.rejeterCandidature}" />
                    </h:column>
                </h:dataTable>
            </div>
        </h:form>
    </h:body>
</f:view>
</html>
